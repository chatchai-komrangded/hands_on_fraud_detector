<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Hands on Amazon Fraud Detector</title>
  <meta name="description" content="This is a tutorial on Amazon Fraud Detector." />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Hands on Amazon Fraud Detector" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a tutorial on Amazon Fraud Detector." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Hands on Amazon Fraud Detector" />
  
  <meta name="twitter:description" content="This is a tutorial on Amazon Fraud Detector." />
  

<meta name="author" content="" />


<meta name="date" content="2020-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="chapter2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i>About Amazon Fraud Detector</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prereq"><i class="fa fa-check"></i>Setup &amp; Prerequisites</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dpsetup1"><i class="fa fa-check"></i>Project Setup</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#s3"><i class="fa fa-check"></i>Create S3 Bucket</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#sage1"><i class="fa fa-check"></i>Create SageMaker Instance</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#howitworks"><i class="fa fa-check"></i>Quick Overview</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#goals"><i class="fa fa-check"></i>Goals</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html"><i class="fa fa-check"></i>Project 1 - New Account Fraud</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#bmodel1"><i class="fa fa-check"></i>Step 1. Define model</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#ds1"><i class="fa fa-check"></i>Setup a Data Source</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#ds2"><i class="fa fa-check"></i>Create an IAM role</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#ds3"><i class="fa fa-check"></i>Training data source</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#configmodel"><i class="fa fa-check"></i>Step 2. Configure Model</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#map1"><i class="fa fa-check"></i>Map File Inputs</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#fraudlabel1"><i class="fa fa-check"></i>Map Fraud Label</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#rvc"><i class="fa fa-check"></i>Step 3. Create &amp; Train Model</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#modelperf"><i class="fa fa-check"></i>Step 4. Model Training Complete</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#mp"><i class="fa fa-check"></i>Model Performance</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#auc"><i class="fa fa-check"></i>Understanding AUC</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#confmatrix"><i class="fa fa-check"></i>Confusion Matrix</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#operatingRange"><i class="fa fa-check"></i>Operating Range</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#deploymodel"><i class="fa fa-check"></i>Step 5. Deploy Model</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#createdetector"><i class="fa fa-check"></i>Step 6. Create a Detector</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#addamodel"><i class="fa fa-check"></i>Add a Model</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#authorrules"><i class="fa fa-check"></i>Author Rules</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#ruleexecution"><i class="fa fa-check"></i>Rule Execution</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#testdetector"><i class="fa fa-check"></i>Test Detector</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#publishdetector"><i class="fa fa-check"></i>Publish Detector</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#makepredictions"><i class="fa fa-check"></i>Step 7. Make Predictions</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#integrateLambda"><i class="fa fa-check"></i>Step 8. Integration with AWS Lambda &amp; REST API</a><ul>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#lambda"><i class="fa fa-check"></i>Create a AWS Lambda Function</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#testLambda"><i class="fa fa-check"></i>Test your Lambda</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#createAPI"><i class="fa fa-check"></i>Create REST API with Amazon API Gateway</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#testAPI"><i class="fa fa-check"></i>Test your REST API</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#deployAPI"><i class="fa fa-check"></i>Deploy your REST API</a></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#curlAPI"><i class="fa fa-check"></i>Curl your REST API</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter2.html"><a href="chapter2.html#proj1Conclusion"><i class="fa fa-check"></i>Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html"><i class="fa fa-check"></i>Executing a POC with Online Fraud Insights</a><ul>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step1POC"><i class="fa fa-check"></i>Step 1. Determine your Use case</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step2POC"><i class="fa fa-check"></i>Step 2. Define your Evaluation Criteria</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step3POC"><i class="fa fa-check"></i>Step 3. Gather Data</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step4POC"><i class="fa fa-check"></i>Step 4. Train &amp; Evaluate a Fraud Detector Model</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step5POC"><i class="fa fa-check"></i>Step 5. Create and Publish a Detector</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step6POC"><i class="fa fa-check"></i>Step 6. Make Predictions</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step7POC"><i class="fa fa-check"></i>Step 7. Evaluate Predictions</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#step8POC"><i class="fa fa-check"></i>Step 8. Integrate</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#afds"><i class="fa fa-check"></i>AWS’ Fraud Detection Strategy</a><ul>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#prevent"><i class="fa fa-check"></i>Prevent</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#contain"><i class="fa fa-check"></i>Contain</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#detect"><i class="fa fa-check"></i>Detect</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#remediate"><i class="fa fa-check"></i>Remediate</a></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#improve"><i class="fa fa-check"></i>Improve</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="chapter1.html"><a href="chapter1.html#finalconclusion"><i class="fa fa-check"></i>Conclusion</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hands on Amazon Fraud Detector</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Hands on Amazon Fraud Detector</h1>
<p class="date"><em>2020-06-01</em></p>
</div>
<div id="index" class="section level1 unnumbered">
<h1>Introduction</h1>
<p>It doesn’t matter if the company is a mom-and-pop shop or a Fortune 500 industry leader. Everyone has a fraud challenge and a need to get serious about fighting fraud. Unlike standard business problems that can be solved with slice and dice tools, fraud detection requires an investment in technology, people and a strategy that aligns to the business. One need only scan the <a href="https://blogs.wsj.com/riskandcompliance/category/fraud/">headlines</a> to see that fraud is big business, here is a recent example of phishing: <em>$450K Lost in 3 Days: Hackers Trick Victims Into Big Wire Transfers</em> <a href="https://www.wsj.com/articles/losing-450-000-in-three-days-hackers-trick-victims-into-big-wire-transfers-11582453800">WSJ</a>. Here are some stats:</p>
<ul>
<li>Fraud losses grew <strong>13% in 2019 to $16.9 billion</strong> according to <a href="https://www.javelinstrategy.com/">Javelin Strategy</a></li>
<li>Record <strong>1.7M</strong> Fraud reports reported to the <a href="https://www.ftc.gov/news-events/press-releases/2020/01/new-ftc-data-shows-ftc-received-nearly-17-million-fraud-reports">FTC</a> in 2019</li>
<li><strong>27.8%</strong> &amp; <strong>$3.4B</strong> world wide increase and cost of new account fraud in 2019 <a href="https://www.javelinstrategy.com/">Javelin Strategy</a></li>
<li><strong>New account fraud</strong> was reported more often than all other forms of identity theft combined in 2019</li>
<li><strong>$10 - $20</strong> the cost of someone’s identity on the dark web.</li>
</ul>
<div id="about" class="section level2 unnumbered">
<h2>About Amazon Fraud Detector</h2>
<p>Amazon Fraud Detector is a fully managed service that makes it easy to identify potentially fraudulent online activities such as the creation of fake accounts or online payment fraud. Unlike general purpose machine learning packages, Fraud Detector is designed specifically to detect fraud and rare events. Fraud Detector combines your data, the latest in machine learning science, and more than 20 years of fraud detection experience from Amazon.com and AWS to build machine learning models tailor-made to detect fraud in your business. This distributed workshop has been designed to help get the most out of your Fraud Detector Experience.</p>
<p>If you are not familiar with Amazon Fraud Detector you can learn more about it here:</p>
<ul>
<li><a href="https://aws.amazon.com/fraud-detector/">Product Page</a><br />
</li>
<li><a href="https://docs.aws.amazon.com/frauddetector/">Product Documentation</a></li>
</ul>
</div>
<div id="prereq" class="section level2 unnumbered">
<h2>Setup &amp; Prerequisites</h2>
<p>While Fraud Detector is in public preview, to get started, you need to have your account white listed to get access to Amazon Fraud Detector. White listing is a simple matter of filling out a form. It takes about a day to get your account enabled, you’ll receive an email once it’s complete. Once enabled follow the steps in the <a href="https://docs.aws.amazon.com/frauddetector/latest/ug/set-up.html">Fraud Detector User Guide</a> to setup permissions and create an IAM user and assign required permissions.</p>
<div id="dpsetup1" class="section level3 unnumbered">
<h3>Project Setup</h3>
<p>In order to run the projects, we recommend that you create an S3 bucket and upload sample data. A jupyter notebook is provided for calling Fraud Detector’s prediction API as well as prepare data for the projects. We recommend using SageMaker to run the notebooks.</p>
</div>
<div id="s3" class="section level3 unnumbered">
<h3>Create S3 Bucket</h3>
<p>The first step in getting prepared to run the Fraud Detector hands on projects, is to setup a S3 bucket where you can upload the project files.</p>
<p><strong>Create an S3 bucket</strong> named <strong><em>hands-on-frauddetector</em></strong></p>
<div class="figure"><span id="fig:unnamed-chunk-1"></span>
<img src="img/s3bucket.png" alt="S3 Bucket" width="100%" />
<p class="caption">
Figure 1: S3 Bucket
</p>
</div>
<p>Upload the following files to your S3 bucket.</p>
<p>New Account Fraud</p>
<ul>
<li><a href="https://github.com/mikames/hands_on_fraud_detector/blob/master/project_1/project_1_new_accounts_100k.csv">project_1_new_account_100k.csv</a><br />
</li>
<li><a href="https://github.com/mikames/hands_on_fraud_detector/blob/master/project_1/project_1_new_accounts_5k.csv">project_1_new_accounts_5k.csv</a></li>
</ul>
</div>
<div id="sage1" class="section level3 unnumbered">
<h3>Create SageMaker Instance</h3>
<p>We are going to use Amazon SageMaker to prepare data and call the Fraud Detector Prediction API from python, but you could use any Jupyter notebook instance as long as you’ve configured your AWS client.</p>
<div class="figure"><span id="fig:unnamed-chunk-2"></span>
<img src="img/crsagemaker.png" alt="Create SageMaker Instance" width="100%" />
<p class="caption">
Figure 2: Create SageMaker Instance
</p>
</div>
<p>Upload the following notebooks to your SageMaker</p>
<p>New Account Fraud</p>
<ul>
<li><a href="https://github.com/mikames/hands_on_fraud_detector/blob/master/project_1/project_1_predict.ipynb">project_1_predict.ipynb</a></li>
</ul>
</div>
</div>
<div id="howitworks" class="section level2 unnumbered">
<h2>Quick Overview</h2>
<p>Building a model and deploying a detector is a pretty straight forward process. As a user, simply upload a CSV containing your historic events to an S3 bucket. Next configure your model in the Fraud Detector console by mapping your file’s fields to Fraud Detector’s data types and initiate training. Once training is complete, add your model to a Detector and author business rules to identify fraud as well as actions you want to take.</p>
<div class="figure"><span id="fig:howitworks"></span>
<img src="img/howitworks.png" alt="How it Works" width="100%" />
<p class="caption">
Figure 3: How it Works
</p>
</div>
<p><strong>Fraud Detector’s ML</strong><br />
Behind the scenes Fraud Detector takes care of the heavy lifting for you. First, it loads your data into memory, inspects it and performs a variety of integrity and validation checks. Next it goes through a series of enrichment, variables like IP address, Email address, and Credit Card are enriched with additional information. For example IP addresses are enriched with geo-locations, autonomous system numbers (ASN), ISPs, domain and organization as well as many other variables. Fraud Detector further enriches fields like IP address, email address, and credit card bin information with <em>Amazon Enrichments</em>. Amazon Enrichments are essentially patterns and signal from past attempts to defraud Amazon, Amazon Subsidiaries and AWS. These enrichments help bring additional predictive power to a customer’s data, above what they could achieve on their own. Finally, Fraud Detector evaluates various algorithms and optimizes their performance producing a Model ready to attack fraud.</p>
</div>
<div id="goals" class="section level2 unnumbered">
<h2>Goals</h2>
<p>By the end of this workshop, you should have picked up the following skills:</p>
<ul>
<li>Prepare and map data-sets to Amazon Fraud Detector.</li>
<li>Identify common use cases.</li>
<li>Train Models, Author Rules and Deploy Detectors using the Fraud Detector Console.</li>
<li>Interpret model performance metrics.</li>
<li>Define strategies to get the most out of Fraud Detector Models &amp; Rules</li>
<li>Call the Detector’s get_prediction API to score data with python</li>
<li>Create an AWS Lambda to call Detector’s get_prediction API</li>
<li>Create an API using Amazon’s API Gateway to call your Lambda function</li>
<li>Lead a successful Proof of Concept!</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="chapter2.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
